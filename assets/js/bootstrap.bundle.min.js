/* Bootstrap 5.3.0 Bundle - Simplified for demo */
/* This would contain the full Bootstrap JavaScript bundle in production */

// Simplified Bootstrap functionality for demo
(function() {
  'use strict';

  // Dropdown functionality
  document.addEventListener('click', function(e) {
    if (e.target.matches('[data-bs-toggle="dropdown"]') || e.target.closest('[data-bs-toggle="dropdown"]')) {
      e.preventDefault();
      const button = e.target.closest('[data-bs-toggle="dropdown"]');
      const menu = button.nextElementSibling;
      if (menu && menu.classList.contains('dropdown-menu')) {
        menu.classList.toggle('show');
      }
    }
  });

  // Close dropdowns when clicking outside
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.dropdown')) {
      document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
        menu.classList.remove('show');
      });
    }
  });

  // Collapse functionality
  document.addEventListener('click', function(e) {
    if (e.target.matches('[data-bs-toggle="collapse"]') || e.target.closest('[data-bs-toggle="collapse"]')) {
      e.preventDefault();
      const button = e.target.closest('[data-bs-toggle="collapse"]');
      const target = document.querySelector(button.getAttribute('data-bs-target'));
      if (target) {
        target.classList.toggle('show');
      }
    }
  });

  // Tab functionality
  document.addEventListener('click', function(e) {
    if (e.target.matches('[data-bs-toggle="tab"]') || e.target.matches('[data-bs-toggle="pill"]')) {
      e.preventDefault();
      const button = e.target;
      const target = document.querySelector(button.getAttribute('data-bs-target'));
      
      // Remove active from all tabs and panes
      const tabContainer = button.closest('[role="tablist"]') || button.closest('.nav');
      if (tabContainer) {
        tabContainer.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active');
          link.setAttribute('aria-selected', 'false');
        });
        
        const contentContainer = tabContainer.nextElementSibling;
        if (contentContainer) {
          contentContainer.querySelectorAll('.tab-pane').forEach(pane => {
            pane.classList.remove('show', 'active');
          });
        }
      }
      
      // Add active to clicked tab and target pane
      button.classList.add('active');
      button.setAttribute('aria-selected', 'true');
      if (target) {
        target.classList.add('show', 'active');
      }
    }
  });

  // Offcanvas functionality
  document.addEventListener('click', function(e) {
    if (e.target.matches('[data-bs-toggle="offcanvas"]') || e.target.closest('[data-bs-toggle="offcanvas"]')) {
      e.preventDefault();
      const button = e.target.closest('[data-bs-toggle="offcanvas"]');
      const target = document.querySelector(button.getAttribute('data-bs-target'));
      if (target) {
        target.classList.add('show');
        document.body.style.overflow = 'hidden';
      }
    }
    
    if (e.target.matches('[data-bs-dismiss="offcanvas"]') || e.target.closest('[data-bs-dismiss="offcanvas"]')) {
      e.preventDefault();
      const offcanvas = e.target.closest('.offcanvas');
      if (offcanvas) {
        offcanvas.classList.remove('show');
        document.body.style.overflow = '';
      }
    }
  });

  // Modal functionality (basic)
  document.addEventListener('click', function(e) {
    if (e.target.matches('[data-bs-toggle="modal"]') || e.target.closest('[data-bs-toggle="modal"]')) {
      e.preventDefault();
      const button = e.target.closest('[data-bs-toggle="modal"]');
      const target = document.querySelector(button.getAttribute('data-bs-target'));
      if (target) {
        target.style.display = 'block';
        target.classList.add('show');
        document.body.style.overflow = 'hidden';
      }
    }
    
    if (e.target.matches('[data-bs-dismiss="modal"]') || e.target.closest('[data-bs-dismiss="modal"]')) {
      e.preventDefault();
      const modal = e.target.closest('.modal');
      if (modal) {
        modal.style.display = 'none';
        modal.classList.remove('show');
        document.body.style.overflow = '';
      }
    }
  });

  // Close modal when clicking backdrop
  document.addEventListener('click', function(e) {
    if (e.target.classList.contains('modal')) {
      e.target.style.display = 'none';
      e.target.classList.remove('show');
      document.body.style.overflow = '';
    }
  });

  // Form validation
  document.addEventListener('submit', function(e) {
    const form = e.target;
    if (form.hasAttribute('novalidate')) {
      e.preventDefault();
      
      let isValid = true;
      const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
      
      inputs.forEach(input => {
        if (!input.value.trim()) {
          input.classList.add('is-invalid');
          isValid = false;
        } else {
          input.classList.remove('is-invalid');
          input.classList.add('is-valid');
        }
      });
      
      // Email validation
      const emailInputs = form.querySelectorAll('input[type="email"]');
      emailInputs.forEach(input => {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (input.value && !emailRegex.test(input.value)) {
          input.classList.add('is-invalid');
          isValid = false;
        }
      });
      
      // Password confirmation
      const password = form.querySelector('#password');
      const confirmPassword = form.querySelector('#confirm-password');
      if (password && confirmPassword && password.value !== confirmPassword.value) {
        confirmPassword.classList.add('is-invalid');
        isValid = false;
      }
      
      form.classList.add('was-validated');
      
      if (isValid) {
        // Handle successful form submission
        console.log('Form is valid, would submit in real app');
      }
    }
  });

  // Initialize tooltips and other components
  document.addEventListener('DOMContentLoaded', function() {
    // Any initialization code would go here
    console.log('Bootstrap initialized');
  });

})();